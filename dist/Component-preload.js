//@ui5-bundle com/ReformNow/Component-preload.js
jQuery.sap.registerPreloadedModules({
"version":"2.0",
"modules":{
	"com/ReformNow/Component.js":function(){sap.ui.define(["sap/ui/core/UIComponent","sap/ui/Device","com/ReformNow/model/models","com/ReformNow/util/Firebase"],function(e,o,i,t){"use strict";return e.extend("com.ReformNow.Component",{metadata:{manifest:"json"},init:function o(){e.prototype.init.apply(this,arguments);this.getRouter().initialize();this.setModel(i.createDeviceModel(),"device");this.setModel(t.initializeFirebase(),"firebase");this.setModel(new sap.ui.model.json.JSONModel(localStorage),"localStorage");jQuery.sap.setIcons({favicon:"asset/favicon.ico"})}})});
},
	"com/ReformNow/controller/BaseController.js":function(){sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/core/UIComponent","sap/ui/core/routing/History","../util/formatter","sap/ui/core/Fragment"],function(e,t,n,o,r){"use strict";return e.extend("com.ReformNow.controller.BaseController",{formatter:o,getRouter:function e(){return t.getRouterFor(this)},getModel:function e(t){return this.getView().getModel(t)},setModel:function e(t,n){return this.getView().setModel(t,n)},getResourceBundle:function e(){return this.getOwnerComponent().getModel("i18n").getResourceBundle()},getMsgDialog:function e(t,n){var o=new sap.m.Dialog({title:t,type:"Message",state:n,content:[],beginButton:new sap.m.Button({type:"Emphasized",text:"OK",press:function e(){o.close()}}),afterClose:function e(){o.destroy()}});return o},fragmentLoad:function e(t){var n=this;var o=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return r.load({name:"com.ReformNow.fragment."+t,id:this.getView().getId(),controller:this}).then(function(e){if(o){e.addStyleClass("sapUiSizeCompact")}n.getView().addDependent(e);return e})},handleCloseDialog:function e(t){t.getSource().getParent().close()}})});
},
	"com/ReformNow/controller/Main.controller.js":'function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(!e)return;if(typeof e==="string")return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor)r=e.constructor.name;if(r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _arrayLikeToArray(e,t)}function _iterableToArray(e){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){if(t==null||t>e.length)t=e.length;for(var r=0,a=new Array(t);r<t;r++){a[r]=e[r]}return a}sap.ui.define(["./BaseController"],function(e){"use strict";return e.extend("com.ReformNow.controller.Main",{onInit:function e(){this.viewData={};this.byId("demandList").setNoDataText("зареждаме данните . . .")},onHandleVote:function e(t,r){var a=t.getSource();var o=this.getModel("local");var n=this.getModel("firebase").getObject("/firestore");var i=a.getParent().getBindingContext("local").getPath();var s=o.getProperty(i);var l=this.getModel("firebase").getObject("/auth").currentUser.uid;s.rating=r==="up"?s.rating+1:s.rating-1;s.voters=[].concat(_toConsumableArray(s.voters),[l]);n.collection("demands").doc(s.docID).update({rating:s.rating,voters:s.voters});o.setProperty(i,s);try{a.getParent().getContent()[3].setVisible(false);a.getParent().getContent()[4].setVisible(false)}catch(e){console.log(e)}sap.m.MessageToast.show("Благодарим Ви за гласуването!")},handleOpenAddDialog:function e(){var t=this;if(!this.viewData.AddDialog){this.fragmentLoad("AddDialog").then(function(e){t.viewData.AddDialog=e;t.byId("dateField").setDateValue(new Date);t.viewData.AddDialog.open()})}else{this.viewData.AddDialog.open()}},handleAddGoal:function e(t){var r=this.byId("titleField"),a=this.byId("descrField"),o=this.byId("dateField");var n={title:r.getValue(),description:a.getValue(),rating:1,timestamp:new Date(o.getDateValue()).toJSON(),voters:[this.getModel("firebase").getObject("/auth").currentUser.uid],verified:false,submitedBy:this.getModel("firebase").getObject("/auth").currentUser.uid};this.getModel("firebase").getObject("/firestore").collection("demands").add(n).then(function(e){sap.m.MessageToast.show("Благодарим Ви!")});r.setValue("");a.setValue("");this.handleCloseDialog(t)}})});',
	"com/ReformNow/controller/Root.controller.js":'function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);if(t)r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable});n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};if(t%2){ownKeys(Object(n),true).forEach(function(t){_defineProperty(e,t,n[t])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(e,Object.getOwnPropertyDescriptors(n))}else{ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}}return e}function _defineProperty(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}sap.ui.define(["./BaseController"],function(e){"use strict";return e.extend("com.ReformNow.controller.Root",{onInit:function e(){var t=this.getOwnerComponent().getModel("firebase").getObject("/firestore");var n=this.getOwnerComponent().getModel("firebase").getObject("/auth");n.onAuthStateChanged(function(e){if(e){}});this.signInAnonimously(n);var r=this.getOwnerComponent().getModel("local");this.getDemandsCollection(t,r)},getDemandsCollection:function e(t,n){t.collection("demands").where("verified","==",true).orderBy("rating","desc").get().then(function(e){n.setProperty("/demands",e.docs.map(function(e){return _objectSpread({docID:e.id},e.data())}))})},signInAnonimously:function e(t){t.signInAnonymously()["catch"](function(e){var t=e.code;var n=e.message;console.log(t,n)})}})});',
	"com/ReformNow/fragment/AddDialog.fragment.xml":'<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:form="sap.ui.layout.form"><Dialog title="Добави цел, за която протестираш" resizable="true" draggable="true"><content><form:SimpleForm editable="true" layout="ResponsiveGridLayout"><form:content><Label text="Заглавие" /><Input id="titleField" /><Label text="Обосновка" /><Input id="descrField" /><Label text="Дата" /><DatePicker id="dateField" displayFormat="dd.MM.YYYY" enabled="false" /></form:content></form:SimpleForm></content><beginButton><Button text="Добави" type="Emphasized" press="handleAddGoal" /></beginButton><endButton><Button text="Назад" press="handleCloseDialog" /></endButton></Dialog></core:FragmentDefinition>',
	"com/ReformNow/i18n/i18n.properties":'title=Title\nappTitle=ReformNow\nappDescription=App Description',
	"com/ReformNow/manifest.json":'{"_version":"1.12.0","sap.app":{"id":"com.ReformNow","type":"application","i18n":"i18n/i18n.properties","applicationVersion":{"version":"1.0.0"},"title":"{{appTitle}}","description":"{{appDescription}}","sourceTemplate":{"id":"ui5template.basicSAPUI5ApplicationProject","version":"1.40.12"},"dataSources":{"local":{"uri":"model/local.json","type":"JSON"}}},"sap.ui":{"technology":"UI5","icons":{"icon":"","favIcon":"","phone":"","phone@2":"","tablet":"","tablet@2":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"flexEnabled":false,"rootView":{"viewName":"com.ReformNow.view.Root","type":"XML","async":true,"id":"Root"},"dependencies":{"minUI5Version":"1.65.6","libs":{"sap.ui.layout":{},"sap.ui.core":{},"sap.m":{}}},"contentDensities":{"compact":true,"cozy":true},"models":{"local":{"dataSource":"local","settings":{"defaultBindingMode":"TwoWay"}},"i18n":{"type":"sap.ui.model.resource.ResourceModel","settings":{"bundleName":"com.ReformNow.i18n.i18n"}}},"resources":{"css":[{"uri":"css/style.css"}]},"routing":{"config":{"routerClass":"sap.m.routing.Router","viewType":"XML","async":true,"viewPath":"com.ReformNow.view","controlAggregation":"pages","controlId":"app","clearControlAggregation":false},"routes":[{"name":"RouteRoot","pattern":"","target":["TargetMain"]},{"name":"RouteMain","pattern":"main","target":["TargetMain"]}],"targets":{"TargetRoot":{"viewType":"XML","transition":"slide","clearControlAggregation":false,"viewId":"Root","viewName":"Root"},"TargetMain":{"viewType":"XML","transition":"slide","clearControlAggregation":false,"viewId":"Main","viewName":"Main"}}}}}',
	"com/ReformNow/model/local.json":'{"demands":[]}',
	"com/ReformNow/model/models.js":function(){sap.ui.define(["sap/ui/model/json/JSONModel","sap/ui/Device"],function(e,n){"use strict";return{createDeviceModel:function i(){var t=new e(n);t.setDefaultBindingMode("OneWay");return t}}});
},
	"com/ReformNow/util/Firebase.js":function(){sap.ui.define(["sap/ui/model/json/JSONModel"],function(a){"use strict";var e={apiKey:"AIzaSyB4IEmsIuoPXmvh5FUtjj0MRl-HLRiS6tM",authDomain:"az-iskam.firebaseapp.com",databaseURL:"https://az-iskam.firebaseio.com",projectId:"az-iskam",storageBucket:"az-iskam.appspot.com",messagingSenderId:"191718209339",appId:"1:191718209339:web:fbdd6b53229d9be65b291e"};return{initializeFirebase:function i(){firebase.initializeApp(e);var s=firebase.firestore();var r=firebase.auth();var t={firestore:s,auth:r};var o=new a(t);return o}}});
},
	"com/ReformNow/util/formatter.js":function(){sap.ui.define([],function(){"use strict";return{dateFormatter1:function t(e){var r=new Date(e),a=r.getDate(),n=r.getMonth()+1;return""+(a<10?"0"+a:a)+"."+(n<10?"0"+n:n)+"."+r.getFullYear()},extractJSONDate:function t(e){var r=new Date(e);var a=r.getMonth()+1;var n=r.getDate();return""+(n<10?"0"+n:n)+"."+(a<10?"0"+a:a)+"."+r.getFullYear()}}});
},
	"com/ReformNow/view/Main.view.xml":'<mvc:View controllerName="com.ReformNow.controller.Main" xmlns:mvc="sap.ui.core.mvc" displayBlock="true" xmlns="sap.m" xmlns:form="sap.ui.layout.form"><Page><customHeader><OverflowToolbar><ToolbarSpacer /><Title text="ЦЕЛИ НА ПРОТЕСТИТЕ" /><ToolbarSpacer /></OverflowToolbar></customHeader><content><List id="demandList" items="{local>/demands}"><items><CustomListItem><Panel accessibleRole="Form" backgroundDesign="Translucent" expandable="true"><headerToolbar><OverflowToolbar><Title text="{local>title}" /><ToolbarSpacer /><Title text="{local>rating} гласа"><layoutData><OverflowToolbarLayoutData priority="NeverOverflow" /></layoutData></Title><Button type="Success" icon="sap-icon://arrow-top" press="onHandleVote($event, \'up\')" visible="{= !${local>voters}.includes(${firebase>/auth/currentUser/uid}) }" tooltip="гласувай \'ЗА\'"><layoutData><OverflowToolbarLayoutData priority="NeverOverflow" /></layoutData></Button><Button type="Negative" icon="sap-icon://arrow-bottom" press="onHandleVote($event, \'down\')" visible="{= !${local>voters}.includes(${firebase>/auth/currentUser/uid}) }" tooltip="гласувай \'ПРОТИВ\'"><layoutData><OverflowToolbarLayoutData priority="NeverOverflow" /></layoutData></Button></OverflowToolbar></headerToolbar><content><form:SimpleForm layout="ColumnLayout" editable="true" title="{local>shortText}"><Label text="Цел" /><Text text="{local>title}" /><Label text="Обосновка" /><Text text="{local>description}" /><Label text="Гласове" /><Text text="{local>rating}" /><Label text="Създадена на" /><Text text="{path: \'local>timestamp\', formatter: \'.formatter.extractJSONDate\'}" /></form:SimpleForm></content></Panel></CustomListItem></items></List></content><footer><Toolbar><ToolbarSpacer /><Button text="Добави" type="Emphasized" press="handleOpenAddDialog" tooltip="Ако нещо липсва, добави го!" /></Toolbar></footer></Page></mvc:View>',
	"com/ReformNow/view/Root.view.xml":'<mvc:View controllerName="com.ReformNow.controller.Root" xmlns:mvc="sap.ui.core.mvc" displayBlock="true" xmlns="sap.m"><Shell id="shell" class="shellBackground"><App id="app"><pages></pages></App></Shell></mvc:View>'
}});
